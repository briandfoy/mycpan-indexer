name: libarchive

on:
    push:
        branches:
            - 'libarchive'

jobs:
    perl:
        runs-on: ${{ matrix.os }}
        strategy:
          matrix:
            os:
                - ubuntu-18.04
            perl-version:
                - 'latest'

        container:
            image: perl:${{ matrix.perl-version }}
        steps:
            - uses: actions/checkout@v2
            - name: Platform check
              run: uname -a
            - name: libarchive
              run: |
                apt-get update -y
                apt-get install -y libarchive-dev
                apt-get install -y libarchive-tools
            - name: Perl version check
              run: perl -V
            - name: Install cpanm and multiple modules
              run: |
                curl -L https://cpanmin.us | perl - App::cpanminus
                cpanm Archive::Extract::Libarchive
